<<<<<<< HEAD
environment:
    ANDROID_HOME: "C:\\android"

    # If the gradle daemon is used, the build hangs after generating the wrapper
    GRADLE_OPTS: -Dorg.gradle.daemon=false

    # URL for SDK Tools, Revision 26.1.1 (September 2017)
    SDK_TOOLS_URL: https://dl.google.com/android/repository/sdk-tools-windows-4333796.zip

    matrix:
        - nodejs_version: 6
        - nodejs_version: 8
        - nodejs_version: 10
        - nodejs_version: 12

install:
    # Install Android SDK Tools
    - mkdir "%ANDROID_HOME%"
    - appveyor DownloadFile "%SDK_TOOLS_URL%" -FileName "%TMP%/sdk-tools.zip"
    - 7z x "%TMP%/sdk-tools.zip" -o"%ANDROID_HOME%" > nul
    - set PATH=%PATH%;"%ANDROID_HOME%\tools\bin"

    - yes 2> nul | sdkmanager --licenses > nul
    - sdkmanager "build-tools;28.0.3"

    - choco install gradle --version 3.4.1

    - ps: Install-Product node $env:nodejs_version
    - npm install
=======
image:
  - Previous Visual Studio 2015

environment:
  ANDROID_HOME: "C:\\android"
  matrix:
  - nodejs_version: "4"
  - nodejs_version: "6"
  - nodejs_version: "8"

init:
  - mkdir "%ANDROID_HOME%
  - cd "%ANDROID_HOME%"
  - appveyor DownloadFile "https://dl.google.com/android/repository/tools_r25.2.3-windows.zip"
  - 7z x "tools_r25.2.3-windows.zip" > nul
  - cd "C:\projects\cordova-android"

install:
  - choco install gradle -version 3.4.1
  - gradle -version
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter platform-tools,tools,build-tools-26.0.2,android-26,android-25,extra-google-m2repository,extra-android-m2repository
  # on windows we need to accept sublicenses for the new tooling, wee. 30 is an arbitrary number,
  # but should be the maximum number of licenses we explicitly need to type "Y ENTER" for.
  # also, the sdkmanager in all its glory leaks a bit of output to stderr, and powershell
  # and appveyor interpret that as errors, and blows up. so, when piping in our "Y ENTER"
  # responses, we invoke cmd so we can redirect stderr to stdout, and tell it to --update itself.
  - ps: for($i=0;$i -lt 30;$i++) { $response += "y`n"}; $response | cmd /c 'C:\android\tools\bin\sdkmanager.bat 2>&1' --update
  - ps: Install-Product node $env:nodejs_version
  - npm install
  # below is a workaround on using gradle installed via choco on appveyor
  - set path=C:\ProgramData\chocolatey\lib\gradle\tools\gradle-3.4.1\bin;%path%
>>>>>>> 1cc6ddc45c2c9dd4b7aacff4a5055552189e0d25

build: off

test_script:
<<<<<<< HEAD
    - gradle --version
    - node --version
    - npm --version
    - npm test
=======
  - node --version
  - npm --version
  - npm test
>>>>>>> 1cc6ddc45c2c9dd4b7aacff4a5055552189e0d25
